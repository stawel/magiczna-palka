#!/bin/bash

# Quick Flash script for STM32F4-Discovery board

if [ $# -eq 0 ]; then
  file=`ls *.bin`
elif [ $# -eq 1 ]; then
  file=$1
else
  echo "Usage:"
  echo $0 "[the_name_of_the_file_with_the_binary_flash_image]"
  exit
fi

openocd -d0 \
 -f  board/stm32f4discovery.cfg\
 -c "init" -c "reset halt" \
 -c "program $file"
